COMPUTED VALUES:
alloy:
  clustering:
    enabled: false
    name: ""
    portName: http
  configMap:
    content: |-
      // Discover all pods in the cluster
      discovery.kubernetes "pods" {
        role = "pod"
      }

      // Filter to only collect logs from pods on the same node as this Alloy instance
      discovery.relabel "pods" {
        targets = discovery.kubernetes.pods.targets

        // Only scrape pods on the same node
        rule {
          source_labels = ["__meta_kubernetes_pod_node_name"]
          regex         = env("HOSTNAME")
          action        = "keep"
        }

        // Add useful labels
        rule {
          source_labels = ["__meta_kubernetes_namespace"]
          target_label  = "namespace"
        }

        rule {
          source_labels = ["__meta_kubernetes_pod_name"]
          target_label  = "pod"
        }

        rule {
          source_labels = ["__meta_kubernetes_pod_container_name"]
          target_label  = "container"
        }
      }

      // Collect logs from discovered pods
      loki.source.kubernetes "pods" {
        targets    = discovery.relabel.pods.output
        forward_to = [loki.write.loki.receiver]
      }

      // Send logs to Loki
      loki.write "loki" {
        endpoint {
          url = "http://loki-gateway.monitoring.svc.cluster.local:80/loki/api/v1/push"
        }
      }
    create: true
    key: null
    name: null
  enableHttpServerPort: true
  enableReporting: true
  envFrom: []
  extraArgs: []
  extraEnv: []
  extraPorts: []
  hostAliases: []
  initialDelaySeconds: 10
  lifecycle: {}
  listenAddr: 0.0.0.0
  listenPort: 12345
  listenScheme: HTTP
  livenessProbe: {}
  mounts:
    dockercontainers: false
    extra: []
    varlog: false
  resources: {}
  securityContext: {}
  stabilityLevel: generally-available
  storagePath: /tmp/alloy
  timeoutSeconds: 1
  uiPathPrefix: /
configReloader:
  customArgs: []
  enabled: true
  image:
    digest: ""
    registry: quay.io
    repository: prometheus-operator/prometheus-config-reloader
    tag: v0.81.0
  resources:
    requests:
      cpu: 10m
      memory: 50Mi
  securityContext: {}
controller:
  affinity: {}
  autoscaling:
    enabled: false
    horizontal:
      enabled: false
      maxReplicas: 5
      minReplicas: 1
      scaleDown:
        policies: []
        selectPolicy: Max
        stabilizationWindowSeconds: 300
      scaleUp:
        policies: []
        selectPolicy: Max
        stabilizationWindowSeconds: 0
      targetCPUUtilizationPercentage: 0
      targetMemoryUtilizationPercentage: 80
    maxReplicas: 5
    minReplicas: 1
    scaleDown:
      policies: []
      selectPolicy: Max
      stabilizationWindowSeconds: 300
    scaleUp:
      policies: []
      selectPolicy: Max
      stabilizationWindowSeconds: 0
    targetCPUUtilizationPercentage: 0
    targetMemoryUtilizationPercentage: 80
    vertical:
      enabled: false
      recommenders: []
      resourcePolicy:
        containerPolicies:
        - containerName: alloy
          controlledResources:
          - cpu
          - memory
          controlledValues: RequestsAndLimits
          maxAllowed: {}
          minAllowed: {}
      updatePolicy: null
  dnsPolicy: ClusterFirst
  enableStatefulSetAutoDeletePVC: false
  extraAnnotations: {}
  extraContainers: []
  extraLabels: {}
  hostNetwork: false
  hostPID: false
  initContainers: []
  minReadySeconds: 10
  nodeSelector: {}
  parallelRollout: true
  podAnnotations: {}
  podDisruptionBudget:
    enabled: false
    maxUnavailable: null
    minAvailable: null
  podLabels: {}
  priorityClassName: ""
  replicas: 1
  terminationGracePeriodSeconds: null
  tolerations: []
  topologySpreadConstraints: []
  type: daemonset
  updateStrategy: {}
  volumeClaimTemplates: []
  volumes:
    extra: []
crds:
  create: true
  global:
    image:
      pullSecrets: []
      registry: ""
    podSecurityContext: {}
extraObjects: []
fullnameOverride: null
global:
  image:
    pullSecrets: []
    registry: ""
  podSecurityContext: {}
image:
  digest: null
  pullPolicy: IfNotPresent
  pullSecrets: []
  registry: docker.io
  repository: grafana/alloy
  tag: null
ingress:
  annotations: {}
  enabled: false
  extraPaths: []
  faroPort: 12347
  hosts:
  - chart-example.local
  labels: {}
  path: /
  pathType: Prefix
  tls: []
nameOverride: null
namespaceOverride: null
networkPolicy:
  egress:
  - {}
  enabled: false
  flavor: kubernetes
  ingress:
  - {}
  policyTypes:
  - Ingress
  - Egress
rbac:
  clusterRules:
  - apiGroups:
    - ""
    resources:
    - nodes
    - nodes/proxy
    - nodes/metrics
    verbs:
    - get
    - list
    - watch
  - nonResourceURLs:
    - /metrics
    verbs:
    - get
  create: true
  namespaces: []
  rules:
  - apiGroups:
    - ""
    - discovery.k8s.io
    - networking.k8s.io
    resources:
    - endpoints
    - endpointslices
    - ingresses
    - pods
    - services
    verbs:
    - get
    - list
    - watch
  - apiGroups:
    - ""
    resources:
    - pods
    - pods/log
    - namespaces
    verbs:
    - get
    - list
    - watch
  - apiGroups:
    - monitoring.grafana.com
    resources:
    - podlogs
    verbs:
    - get
    - list
    - watch
  - apiGroups:
    - monitoring.coreos.com
    resources:
    - prometheusrules
    verbs:
    - get
    - list
    - watch
  - apiGroups:
    - monitoring.coreos.com
    resources:
    - alertmanagerconfigs
    verbs:
    - get
    - list
    - watch
  - apiGroups:
    - monitoring.coreos.com
    resources:
    - podmonitors
    - servicemonitors
    - probes
    - scrapeconfigs
    verbs:
    - get
    - list
    - watch
  - apiGroups:
    - ""
    resources:
    - events
    verbs:
    - get
    - list
    - watch
  - apiGroups:
    - ""
    resources:
    - configmaps
    - secrets
    verbs:
    - get
    - list
    - watch
  - apiGroups:
    - apps
    - extensions
    resources:
    - replicasets
    verbs:
    - get
    - list
    - watch
service:
  annotations: {}
  clusterIP: ""
  enabled: true
  internalTrafficPolicy: Cluster
  nodePort: 31128
  type: ClusterIP
serviceAccount:
  additionalLabels: {}
  annotations: {}
  automountServiceAccountToken: true
  create: true
  name: null
serviceMonitor:
  additionalLabels: {}
  enabled: false
  interval: ""
  metricRelabelings: []
  relabelings: []
  tlsConfig: {}
